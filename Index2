<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>üéâ Surprise üéâ</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  font-style: italic;
  font-size: 1.3em;
  background: black;
  color: white;
  text-align: center;
  overflow-y: auto;
}

#countdown {
  font-size: 2em;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 20px;
}

#lockScreen {
  display: none;
  position: fixed;
  inset: 0;
  background: black;
  color: white;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

#mainContent {
  display: none;
  background: url("assets/Snapchat-516608773.jpg") no-repeat center center fixed;
  background-size: cover;
  width: 100vw;
  height: 100vh;
  padding-top: 60px;
  flex-direction: column;
  align-items: center;
}

.container {
  background: rgba(0,0,0,0.5);
  padding: 20px;
  border-radius: 15px;
  max-width: 600px;
}

.cursor {
  display: inline-block;
  width: 10px;
  background-color: white;
  animation: blink 0.7s steps(1) infinite;
}

@keyframes blink {
  0%,100% {opacity:1}
  50% {opacity:0}
}

.start-btn {
  font-size: 1.5em;
  background: gold;
  padding: 15px 30px;
  border-radius: 20px;
  cursor: pointer;
  display: none;
}

.slideshow {
  display: none;
  margin-top: 20px;
  width: 300px;
  height: 200px;
  border: 4px solid white;
  border-radius: 20px;
  overflow: hidden;
  position: relative;
}

.slideshow img {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0;
  transition: opacity 1s;
}

.slideshow img.active {
  opacity: 1;
}

.heart {
  position: fixed;
  color: red;
  animation: float 5s linear infinite;
}

@keyframes float {
  from {transform: translateY(0); opacity:1}
  to {transform: translateY(-100vh); opacity:0}
}
</style>
</head>

<body>

<div id="countdown"></div>

<div id="lockScreen">
  <h2>üîê Enter Secret Password</h2>
  <input id="pwd" type="password" placeholder="Password"
    style="padding:10px;font-size:1.2em;border-radius:10px;">
  <button onclick="unlock()"
    style="margin-top:15px;padding:10px 25px;font-size:1.1em;border-radius:15px;">
    Unlock ‚ù§Ô∏è
  </button>
  <p id="err" style="color:red;"></p>
</div>

<div id="mainContent">
  <h1>üéâ Happy Birthday Riya üéâ</h1>
  <div class="container">
    <div id="typing"></div><div class="cursor">|</div>
    <button class="start-btn" id="startButton" onclick="startExperience()">üéÅ Tap to Start Surprise</button>
  </div>

  <div class="slideshow" id="slideshow">
    <img src="assets/Snapchat-1382196981.jpg" class="active">
    <img src="assets/Snapchat-1770425031.jpg">
    <img src="assets/Snapchat-194146428.jpg">
    <img src="assets/Snapchat-1999271777.jpg">
    <img src="assets/Snapchat-545597637.jpg">
  </div>

  <audio id="audio" loop>
    <source src="assets/bday.wav" type="audio/mpeg">
  </audio>
</div>

<script>
// ‚è≥ TIMER
const unlockTime = new Date(2025, 6, 27, 0, 0, 0).getTime();
const countdownEl = document.getElementById("countdown");
const mainEl = document.getElementById("mainContent");
const lockEl = document.getElementById("lockScreen");

function updateCountdown() {
  const now = Date.now();
  const d = unlockTime - now;
  if (d <= 0) {
    countdownEl.style.display = "none";
    lockEl.style.display = "flex";
  } else {
    countdownEl.innerHTML = `‚è≥ Unlocking in ${Math.floor(d/86400000)}d`;
    setTimeout(updateCountdown, 1000);
  }
}
updateCountdown();

// üîê ENCRYPTED MESSAGE DATA (password = riya123)
const encryptedData = "NjoYgZ8J4xQ3VZ7sFJx+VQ0zN7Z2+9j8K+z+3sP7tN7r0w0cY4mQhJb8jz8ZrN6L+o=";
let messages = [];

// üîì UNLOCK FUNCTION
async function unlock() {
  try {
    const raw = atob(encryptedData);
    const data = Uint8Array.from(raw, c => c.charCodeAt(0));
    const iv = data.slice(0,12);
    const enc = data.slice(12);

    const keyMat = await crypto.subtle.digest("SHA-256",
      new TextEncoder().encode(document.getElementById("pwd").value)
    );
    const key = await crypto.subtle.importKey(
      "raw", keyMat, {name:"AES-GCM"}, false, ["decrypt"]
    );

    const dec = await crypto.subtle.decrypt({name:"AES-GCM", iv}, key, enc);
    messages = JSON.parse(new TextDecoder().decode(dec));

    lockEl.style.display = "none";
    mainEl.style.display = "flex";
    setTimeout(typeMessage, 500);
    startAnimations();
  } catch {
    document.getElementById("err").innerText = "‚ùå Wrong password";
  }
}

// ‚úçÔ∏è TYPING
let i=0,j=0;
const typingEl = document.getElementById("typing");
function typeMessage() {
  if (i < messages.length) {
    if (j < messages[i].length) {
      typingEl.textContent += messages[i][j++];
      setTimeout(typeMessage, 50);
    } else {
      typingEl.textContent += "\n";
      i++; j=0;
      setTimeout(typeMessage, 800);
    }
  } else {
    document.querySelector(".cursor").style.display="none";
    document.getElementById("startButton").style.display="inline-block";
  }
}

// üéµ EXPERIENCE
function startExperience() {
  document.getElementById("audio").play();
  const slides = document.querySelectorAll(".slideshow img");
  document.getElementById("slideshow").style.display="block";
  let idx=0;
  setInterval(()=>{
    slides.forEach(i=>i.classList.remove("active"));
    idx=(idx+1)%slides.length;
    slides[idx].classList.add("active");
  },8000);
}

// ‚ù§Ô∏è HEARTS
function startAnimations() {
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="‚ù§Ô∏è";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),5000);
  },200);
}
</script>

</body>
</html>
